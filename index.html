<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evolution of Hawaiian Volcanoes</title>
    <style>
        :root {
            --sky-top: #87CEEB;
            --sky-bot: #E0F6FF;
            --ocean-top: #006994;
            --ocean-bot: #00334e;
            --lava: #FF4500;
            --rock: #4A4A4A;
            --sand: #F4A460;
            --coral: #FF7F50;
            --text-color: #333;
            --panel-bg: rgba(255, 255, 255, 0.95);
            --accent: #D32F2F;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: var(--text-color);
            display: flex;
            justify-content: center;
        }

        /* Main Widget Container */
        .widget-container {
            width: 100%;
            max-width: 900px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            background: var(--rock);
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 { margin: 0; font-size: 1.5rem; }
        header p { margin: 5px 0 0; font-size: 0.9rem; opacity: 0.8; }

        /* Visualization Area (The Stage) */
        .visual-stage {
            position: relative;
            height: 350px;
            width: 100%;
            background: linear-gradient(to bottom, var(--sky-top) 0%, var(--sky-bot) 50%, var(--ocean-top) 50%, var(--ocean-bot) 100%);
            overflow: hidden;
            transition: background 1s;
        }

        /* SVG Styles */
        svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        .volcano-shape { fill: var(--rock); transition: d 1s ease-in-out, transform 1s ease; }
        .magma-chamber { fill: var(--lava); opacity: 0; transition: opacity 0.5s, d 1s ease-in-out; }
        .plume { fill: url(#plumeGradient); opacity: 0; transition: opacity 0.5s; }
        .water-level { stroke: rgba(255,255,255,0.3); stroke-width: 2; stroke-dasharray: 5,5; }
        .label-text { font-size: 14px; fill: white; text-shadow: 0 1px 3px black; opacity: 0; transition: opacity 0.5s; }
        
        /* Animation Classes */
        .active-magma { opacity: 1 !important; }
        .erupting { animation: pulseMagma 2s infinite; }
        
        @keyframes pulseMagma {
            0% { fill: #FF4500; }
            50% { fill: #FFD700; }
            100% { fill: #FF4500; }
        }

        /* Controls / Timeline */
        .timeline-controls {
            display: flex;
            justify-content: space-between;
            background: #eee;
            padding: 10px 20px;
            overflow-x: auto;
        }

        .stage-btn {
            background: none;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-weight: bold;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .stage-btn:hover { color: var(--accent); }
        .stage-btn.active { color: var(--accent); border-bottom: 3px solid var(--accent); }

        /* Information Panel */
        .info-panel {
            padding: 25px;
            background: var(--panel-bg);
            min-height: 200px;
        }

        .info-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }

        .stage-title { font-size: 1.4rem; color: var(--accent); margin: 0; }
        .stage-duration { font-size: 0.9rem; color: #666; font-style: italic; }

        .info-content { display: flex; gap: 20px; flex-wrap: wrap; }
        .description { flex: 2; min-width: 300px; line-height: 1.6; }
        .stats-box {
            flex: 1;
            min-width: 200px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            border-left: 4px solid var(--accent);
        }

        .stats-box h4 { margin-top: 0; color: #444; }
        .stats-box ul { padding-left: 20px; margin-bottom: 0; }

        /* Responsive */
        @media (max-width: 600px) {
            .visual-stage { height: 250px; }
            .info-content { flex-direction: column; }
        }
    </style>
</head>
<body>

<div class="widget-container">
    <header>
        <h1>Hawaiian Volcano Lifecycle</h1>
        <p>From deep-sea vent to sunken atoll: The assembly line of the Pacific Plate</p>
    </header>

    <div class="visual-stage">
        <svg viewBox="0 0 800 400" preserveAspectRatio="xMidYMid slice">
            <defs>
                <linearGradient id="plumeGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" style="stop-color:#ff0000;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#ff8c00;stop-opacity:0" />
                </linearGradient>
            </defs>
            
            <path id="hotspot" class="plume" d="M 350 400 L 450 400 L 400 250 Z" />

            <path id="volcano" class="volcano-shape" d="" />
            
            <path id="magma" class="magma-chamber" d="" />

            <line x1="0" y1="200" x2="800" y2="200" class="water-level" />
            <text x="10" y="190" fill="white" font-size="12" opacity="0.7">Sea Level</text>
            <text x="10" y="390" fill="rgba(255,255,255,0.3)" font-size="12">Seafloor (Pacific Plate)</text>

            <text id="viz-label" x="400" y="80" text-anchor="middle" class="label-text">Label</text>
        </svg>
    </div>

    <div class="timeline-controls">
        <button class="stage-btn active" onclick="setStage(0)">1. Preshield</button>
        <button class="stage-btn" onclick="setStage(1)">2. Shield-Building</button>
        <button class="stage-btn" onclick="setStage(2)">3. Postshield</button>
        <button class="stage-btn" onclick="setStage(3)">4. Rejuvenated</button>
        <button class="stage-btn" onclick="setStage(4)">5. Erosion & Atoll</button>
    </div>

    <div class="info-panel">
        <div class="info-header">
            <h2 id="st-title" class="stage-title">Stage Title</h2>
            <span id="st-duration" class="stage-duration">Duration</span>
        </div>
        <div class="info-content">
            <div id="st-desc" class="description">Description placeholder.</div>
            <div class="stats-box">
                <h4>Key Features</h4>
                <ul id="st-features"></ul>
                <p style="margin-top:10px; font-size:0.85rem;"><strong>Current Example:</strong> <span id="st-example">Example</span></p>
            </div>
        </div>
    </div>
</div>

<script>
    const stages = [
        {
            title: "1. Preshield Stage",
            duration: "~200,000 years",
            desc: "The birth of the volcano. Occurring entirely underwater, the hot spot initiates growth with infrequent, small-volume eruptions. Pillow lavas construct a steep-sided volcanic pile. Magma rises directly from the center.",
            features: ["Submarine activity", "Steep-sided 'pillow lava' pile", "Alkalic magma composition", "Infrequent eruptions"],
            example: "Kama‘ehuakanaloa (formerly Lō‘ihi)",
            path: "M 200 400 Q 300 250 400 240 Q 500 250 600 400 Z", 
            magma: "M 380 400 L 400 240 L 420 400 Z", 
            hotspotActive: true,
            erupting: true,
            label: "Submarine Growth"
        },
        {
            title: "2. Shield-Building Stage",
            duration: "Up to 2 Million years",
            desc: "The main growth phase. The volcano breaches the surface and grows rapidly into a broad shield. The enormous weight connects to the seafloor. Magma rises centrally and erupts voluminously from the summit.",
            features: ["Breaches sea level", "Massive shield shape", "Caldera formation", "Crustal subsidence"],
            example: "Mauna Loa, Kīlauea",
            path: "M 0 400 Q 200 150 350 120 L 450 120 Q 600 150 800 400 Z",
            magma: "M 360 400 L 380 120 L 420 120 L 440 400 Z",
            hotspotActive: true,
            erupting: true,
            label: "Massive Shield (Active)"
        },
        {
            title: "3. Postshield Stage",
            duration: "500k - 1 Million years",
            desc: "The volcano moves slightly off the hotspot center. Eruptions become more explosive (cinder cones) and 'cap' the volcano. Notice the magma path has shifted slightly to the right of the center.",
            features: ["Explosive cinder eruptions", "Steeper summit capping", "Fills calderas", "Declining eruption rate"],
            example: "Mauna Kea, Hualālai, Haleakalā",
            path: "M 50 400 Q 220 120 400 80 Q 580 120 750 400 Z",
            magma: "M 380 400 L 420 80 L 440 400 Z", 
            hotspotActive: true, 
            erupting: false, 
            label: "Capping Phase"
        },
        {
            title: "4. Rejuvenated Stage",
            duration: "Several Million years",
            desc: "After a long quiet period of erosion, the volcano has moved far from the hotspot. The flanks have smoothed out as reefs build up the sides (filling in valleys). Small eruptions blast through these reefs on the side.",
            features: ["Follows erosion period", "Reefs build on flanks", "Volcanic maars", "Side vent eruptions"],
            example: "Ko‘olau (Diamond Head), West Maui",
            // VISUAL UPDATE: Removed jagged valleys. Smooth shoulders (reefs) building up to the center.
            path: "M 80 400 Q 200 220 280 200 Q 330 180 380 140 L 400 130 L 420 140 Q 470 180 520 200 Q 600 220 720 400 Z",
            // MAGMA UPDATE: Side vent on the right shoulder.
            magma: "M 480 400 L 510 200 L 530 400 Z", 
            hotspotActive: false,
            erupting: false,
            label: "Reef Growth & Side Vent"
        },
        {
            title: "5. Erosion, Subsidence & Atoll",
            duration: "10-30 Million years+",
            desc: "The volcano sinks below sea level. Smooth coral mounds grow upward at the edges to stay in the sunlight, forming a ring (atoll) with a central lagoon.",
            features: ["Heavy erosion & Landslides", "Coral Atoll formation", "Subsidence below sea level", "Lagoon formation"],
            example: "Kure Atoll, Emperor Seamounts",
            // VISUAL UPDATE: Smooth mounds (Q curves) instead of spikes.
            path: "M 200 400 Q 280 250 300 210 Q 310 180 330 215 Q 400 250 470 215 Q 490 180 500 210 Q 520 250 600 400 Z",
            magma: "M 400 400 L 400 400 Z", 
            hotspotActive: false,
            erupting: false,
            label: "Coral Atoll / Guyot"
        }
    ];

    // DOM Elements
    const volcanoPath = document.getElementById('volcano');
    const magmaPath = document.getElementById('magma');
    const hotspot = document.getElementById('hotspot');
    const vizLabel = document.getElementById('viz-label');
    
    const uiTitle = document.getElementById('st-title');
    const uiDuration = document.getElementById('st-duration');
    const uiDesc = document.getElementById('st-desc');
    const uiFeatures = document.getElementById('st-features');
    const uiExample = document.getElementById('st-example');
    const buttons = document.querySelectorAll('.stage-btn');

    function setStage(index) {
        const stage = stages[index];

        buttons.forEach((btn, i) => {
            if(i === index) btn.classList.add('active');
            else btn.classList.remove('active');
        });

        volcanoPath.setAttribute('d', stage.path);
        magmaPath.setAttribute('d', stage.magma);
        
        hotspot.style.opacity = stage.hotspotActive ? '0.8' : '0';

        if (stage.erupting) {
            magmaPath.classList.add('active-magma');
            magmaPath.classList.add('erupting');
        } else if (index === 2 || index === 3) { 
             magmaPath.classList.add('active-magma');
             magmaPath.classList.remove('erupting');
        } else {
            magmaPath.classList.remove('active-magma');
            magmaPath.classList.remove('erupting');
        }

        vizLabel.textContent = stage.label;
        vizLabel.style.opacity = 1;
        setTimeout(() => { vizLabel.style.opacity = 0.8; }, 1000);

        uiTitle.textContent = stage.title;
        uiDuration.textContent = stage.duration;
        uiDesc.textContent = stage.desc;
        uiExample.textContent = stage.example;

        uiFeatures.innerHTML = '';
        stage.features.forEach(feat => {
            const li = document.createElement('li');
            li.textContent = feat;
            uiFeatures.appendChild(li);
        });
    }

    setStage(0);

</script>

</body>
</html>

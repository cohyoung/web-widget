<div id="fm-widget" class="fm-container">
  <div class="fm-toolbar">
    <div class="nav-controls">
      <button onclick="prevRecord()">◀</button>
      <span id="record-indicator">1 / 3</span>
      <button onclick="nextRecord()">▶</button>
    </div>
    <div class="view-controls">
      <button onclick="setView('form')">Form</button>
      <button onclick="setView('list')">List</button>
    </div>
  </div>

  <div id="layout-area" class="fm-layout-body">
    <div id="form-view" class="view-pane">
      <div class="field-row">
        <label>Customer Name</label>
        <input type="text" data-field="name" oninput="updateData(this)">
      </div>
      <div class="field-row">
        <label>Company</label>
        <input type="text" data-field="company" oninput="updateData(this)">
      </div>
    </div>

    <div id="list-view" class="view-pane hidden">
      <table id="list-table">
        <thead><tr><th>Name</th><th>Company</th></tr></thead>
        <tbody id="list-body"></tbody>
      </table>
    </div>
  </div>
</div>

<style>
  .fm-container { border: 1px solid #ccc; font-family: sans-serif; width: 400px; }
  .fm-toolbar { background: #f0f0f0; padding: 10px; display: flex; justify-content: space-between; border-bottom: 1px solid #ccc; }
  .fm-layout-body { padding: 20px; height: 200px; background: white; }
  .field-row { margin-bottom: 15px; }
  .field-row label { display: block; font-size: 12px; color: #666; }
  .hidden { display: none; }
  table { width: 100%; border-collapse: collapse; }
  td, th { text-align: left; padding: 5px; border-bottom: 1px solid #eee; font-size: 13px; }
</style>

<script>
  let records = [
    { name: "John Doe", company: "Acme Corp" },
    { name: "Jane Smith", company: "Globex" },
    { name: "Bob Ross", company: "Happy Trees" }
  ];
  let currentIndex = 0;

  function renderForm() {
    const record = records[currentIndex];
    document.querySelectorAll('[data-field]').forEach(input => {
      input.value = record[input.dataset.field];
    });
    document.getElementById('record-indicator').innerText = `${currentIndex + 1} / ${records.length}`;
  }

  function setView(view) {
    document.getElementById('form-view').classList.toggle('hidden', view !== 'form');
    document.getElementById('list-view').classList.toggle('hidden', view !== 'list');
    if (view === 'list') renderList();
  }

  function renderList() {
    const body = document.getElementById('list-body');
    body.innerHTML = records.map((r, i) => 
      `<tr onclick="goToRecord(${i})"><td>${r.name}</td><td>${r.company}</td></tr>`
    ).join('');
  }

  function nextRecord() { if (currentIndex < records.length - 1) { currentIndex++; renderForm(); } }
  function prevRecord() { if (currentIndex > 0) { currentIndex--; renderForm(); } }
  function goToRecord(i) { currentIndex = i; setView('form'); renderForm(); }
  function updateData(el) { records[currentIndex][el.dataset.field] = el.value; }

  renderForm();
</script>
